---
title: 第五章 - 引用类型
date: 2020-03-21 02:19:07
tags: JS
---
本章内容 
- 使用对象 
- 创建并操作数组 
- 理解基本的 JavaScript 类型 
- 使用基本类型和基本包装类型 

引用类型的值（即对象）是**引用类型**的一个实例。在 ECMAScript 中，引用类型是一种数据结构，用于将数据和功能组织在一起。引用类型有时候也被称为**对象定义**，因为它们描述的是一类对象所具有的属性和方法。被称为类并不妥当，因为它不具备传统的面向对象语言所支持的类和接口等基本结构。
新对象是使用 new 操作符后跟一个**构造函数**来创建的。构造函数本身就是一个函数，只不过该函数是出于创建新对象的目的而定义的。
```js
var person = new Object();
```
这行代码创建了 Object 引用类型的一个新实例，然后把该实例保存在了变量 person 中。

## 5.1 Object 类型 
**创建 Object 实例**的方式有两种。
第一种是使用 new 操作符后跟 Object 构造函数：
```js
var person = new Object(); 
person.name = "Nicholas"; 
person.age = 29;
```
另一种方式是使用对象字面量表示法：
```js
var person = { 
    name : "Nicholas", 
    age : 29 
};
```
在使用对象字面量语法时，属性名也可以使用字符串。
> 在通过对象字面量定义对象时，实际上不会调用 Object 构造函数。

际上，对象字面量是向函数传递大量可选参数的首选方式，例如：
```js
function displayInfo(args) { 
    var output = ""; 
 
    if (typeof args.name == "string"){ 
        output += "Name: " + args.name + "\n"; 
    } 
 
    if (typeof args.age == "number") { 
        output += "Age: " + args.age + "\n"; 
    } 
 
    alert(output); 
} 
 
displayInfo({  
    name: "Nicholas",  
    age: 29 
}); 
 
displayInfo({ 
    name: "Greg" 
}); 
```
函数 displayInfo()接受一个名为 args的参数。这个参数可能带有一个名为 name或 age 的属性，也可能这两个属性都有或者都没有。
> 这种传递参数的模式最适合需要向函数传入大量可选参数的情形。最好的做法是对那些必需值使用命名参数，而使用对象字面量来封装多个可选参数。 
**访问对象属性**时可使用点表示法，也可以使用方括号表示法。
通常，除非必须使用变量来访问属性，否则我们建议使用点表示法。 

## 5.2 Array 类型 
与其他语言不同的是，ECMAScript 数组的每一项可以保存任何类型的数据。而且，ECMAScript 数组的大小是可以动态调整的，即可以随着数据的添加自动增长以容纳新增数据。（可从对象的角度来理解）
**创建数组**的基本方式有两种。第一种是使用 Array 构造函数：
```js
var colors = new Array(); 
var colors = new Array(3); // 创建一个包含 3 项的数组 
var names = new Array("Greg"); // 创建一个包含 1 项，即字符串"Greg"的数组
```
另外，在使用 Array 构造函数时也可以省略 new 操作符。
第二种基本方式是使用数组字面量表示法：
```js
var colors = ["red", "blue", "green"]; // 创建一个包含 3 个字符串的数组 
var names = []; // 创建一个空数组 
```
在读取和设置数组的值时，要使用方括号并提供相应值的基于 0 的数字索引。（因为用点访问属性为数字实在是太奇怪了啊）
数组的** length 属性**的值为数组中最大索引值+1（数组最后一项的索引始终是 length-1）；而且通过设置可以从数组的末尾移除项或向数组中添加新项。

### 5.2.1 检测数组 
对于一个网页，或者一个全局作用域而言，使用 **instanceof** 操作符即可，但如果网页中包含多个框架，那实际上就存在两个以上不同的全局执行环境，从而存在两个以上不同版本的 Array 构造函数。
为了解决这个问题，ECMAScript 5 新增了 **Array.isArray()**方法：
```js
if (Array.isArray(value)){ 
    //对数组执行某些操作 
} 
```

### 5.2.2 转换方法 
如前所述，所有对象都具有 toLocaleString()、toString()和 valueOf()方法。其中，调用数组的 **toString()方法**会返回由数组中每个值的字符串形式拼接而成的一个以逗号分隔的字符串。而调用 **valueOf()**返回的还是数组。
```js
var colors = ["red", "blue", "green"];
colors.toString(); // "red,blue,green"
colors.valueOf(); // ["red", "blue", "green"]
colors; // ["red", "blue", "green"]
```
而如果使用 **join()方法**，则可以使用不同的分隔符来构建这个字符串：
```js
var colors = ["red", "green", "blue"]; 
alert(colors.join(","));       // "red,green,blue" 
alert(colors.join("||"));      // "red||green||blue"
```
